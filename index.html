<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1å¹´ç”Ÿã®ã‹ã‚“ã˜ãƒ‰ãƒªãƒ«</title>
    <script src="https://cdn.jsdelivr.net/npm/hanzi-writer@3.5/dist/hanzi-writer.min.js"></script>
    <style>
        body {
            font-family: "Hiragino Kaku Gothic ProN", "Noto Sans JP", sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #E0F7FA; /* å­ä¾›å‘ã‘ã«æ˜ã‚‹ã„æ°´è‰² */
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }

        h1 {
            color: #006064;
            font-size: 1.8rem;
            margin-bottom: 10px;
            text-align: center;
        }

        .progress {
            font-size: 1.2rem;
            color: #00838F;
            margin-bottom: 15px;
            font-weight: bold;
        }

        /* ãƒ¡ã‚¤ãƒ³ã®ç·´ç¿’ã‚¨ãƒªã‚¢ */
        .practice-area {
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            margin-bottom: 20px;
            border: 5px solid #4DD0E1;
        }

        /* æ¼¢å­—ã‚’è¡¨ç¤ºã™ã‚‹é ˜åŸŸ */
        #character-target-div {
            width: 300px;
            height: 300px;
            border: 2px dashed #B2EBF2;
            border-radius: 10px;
            cursor: pointer;
            touch-action: none; 
            background-color: #FAFAFA;
        }

        /* èª­ã¿ä»®åã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .reading-box {
            margin-left: 20px;
            width: 60px;
            text-align: center;
            background-color: #FFF9C4; /* è–„ã„é»„è‰² */
            padding: 10px 5px;
            border-radius: 10px;
            border: 2px solid #FFF176;
        }

        .reading-text {
            font-size: 2rem;
            font-weight: bold;
            color: #333;
            writing-mode: vertical-rl;
            text-orientation: upright;
            letter-spacing: 0.2rem;
            height: 100%;
        }

        /* ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º */
        #status-msg {
            height: 2rem;
            font-size: 1.2rem;
            font-weight: bold;
            color: #006064;
            margin-bottom: 20px;
            text-align: center;
        }

        /* æ“ä½œãƒœã‚¿ãƒ³ */
        .controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        button {
            padding: 12px 24px;
            font-size: 1.1rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.1s, opacity 0.2s;
        }

        button:active {
            transform: translateY(2px);
        }

        /* æ¬¡ã¸ãƒœã‚¿ãƒ³ */
        button.primary {
            background-color: #FF7043; /* ã‚ªãƒ¬ãƒ³ã‚¸ */
            color: white;
        }

        /* æ›¸ãç›´ã™ãƒœã‚¿ãƒ³ */
        button.secondary {
            background-color: #78909C;
            color: white;
        }

        /* ãƒ’ãƒ³ãƒˆãƒœã‚¿ãƒ³ */
        button.hint {
            background-color: #26A69A;
            color: white;
        }

    </style>
</head>
<body>

    <h1>1ã­ã‚“ã›ã„ ã‹ã‚“ã˜ãƒ‰ãƒªãƒ«</h1>
    <div class="progress" id="progress-text">ã‚‚ã‚“ã‚</div>

    <div class="practice-area">
        <div id="character-target-div"></div>
        
        <div class="reading-box">
            <div id="reading-text" class="reading-text"></div>
        </div>
    </div>

    <div id="status-msg">ãªãã£ã¦ã¿ã‚ˆã†ï¼</div>

    <div class="controls">
        <button class="secondary" onclick="resetWriter()">ã‹ããªãŠã™</button>
        <button class="hint" onclick="animateStroke()">ãƒ’ãƒ³ãƒˆ</button>
        <button class="primary" onclick="nextChar()">ã¤ãã¸</button>
    </div>

    <script>
        // å°å­¦1å¹´ç”Ÿã®æ¼¢å­—ãƒªã‚¹ãƒˆï¼ˆ80å­—ï¼‰
        const originalList = [
            { char: 'ä¸€', reading: 'ã„ã¡' }, { char: 'å³', reading: 'ã¿ã' },
            { char: 'é›¨', reading: 'ã‚ã‚' }, { char: 'å††', reading: 'ãˆã‚“' },
            { char: 'ç‹', reading: 'ãŠã†' }, { char: 'éŸ³', reading: 'ãŠã¨' },
            { char: 'ä¸‹', reading: 'ã—ãŸ' }, { char: 'ç«', reading: 'ã²' },
            { char: 'èŠ±', reading: 'ã¯ãª' }, { char: 'è²', reading: 'ã‹ã„' },
            { char: 'å­¦', reading: 'ã¾ãªã¶' }, { char: 'æ°—', reading: 'ã' },
            { char: 'ä¹', reading: 'ãã‚…ã†' }, { char: 'ä¼‘', reading: 'ã‚„ã™ã‚€' },
            { char: 'ç‰', reading: 'ãŸã¾' }, { char: 'é‡‘', reading: 'ã‹ã­' },
            { char: 'ç©º', reading: 'ãã‚‰' }, { char: 'æœˆ', reading: 'ã¤ã' },
            { char: 'çŠ¬', reading: 'ã„ã¬' }, { char: 'è¦‹', reading: 'ã¿ã‚‹' },
            { char: 'äº”', reading: 'ã”' }, { char: 'å£', reading: 'ãã¡' },
            { char: 'æ ¡', reading: 'ã“ã†' }, { char: 'å·¦', reading: 'ã²ã ã‚Š' },
            { char: 'ä¸‰', reading: 'ã•ã‚“' }, { char: 'å±±', reading: 'ã‚„ã¾' },
            { char: 'å­', reading: 'ã“' }, { char: 'å››', reading: 'ã‚ˆã‚“' },
            { char: 'ç³¸', reading: 'ã„ã¨' }, { char: 'å­—', reading: 'ã˜' },
            { char: 'è€³', reading: 'ã¿ã¿' }, { char: 'ä¸ƒ', reading: 'ãªãª' },
            { char: 'è»Š', reading: 'ãã‚‹ã¾' }, { char: 'æ‰‹', reading: 'ã¦' },
            { char: 'å', reading: 'ã˜ã‚…ã†' }, { char: 'å‡º', reading: 'ã§ã‚‹' },
            { char: 'å¥³', reading: 'ãŠã‚“ãª' }, { char: 'å°', reading: 'ã¡ã„ã•ã„' },
            { char: 'ä¸Š', reading: 'ã†ãˆ' }, { char: 'æ£®', reading: 'ã‚‚ã‚Š' },
            { char: 'äºº', reading: 'ã²ã¨' }, { char: 'æ°´', reading: 'ã¿ãš' },
            { char: 'æ­£', reading: 'ãŸã ã—ã„' }, { char: 'ç”Ÿ', reading: 'ã„ãã‚‹' },
            { char: 'é’', reading: 'ã‚ãŠ' }, { char: 'å¤•', reading: 'ã‚†ã†' },
            { char: 'çŸ³', reading: 'ã„ã—' }, { char: 'èµ¤', reading: 'ã‚ã‹' },
            { char: 'åƒ', reading: 'ã›ã‚“' }, { char: 'å·', reading: 'ã‹ã‚' },
            { char: 'å…ˆ', reading: 'ã•ã' }, { char: 'æ—©', reading: 'ã¯ã‚„ã„' },
            { char: 'è‰', reading: 'ãã•' }, { char: 'è¶³', reading: 'ã‚ã—' },
            { char: 'æ‘', reading: 'ã‚€ã‚‰' }, { char: 'å¤§', reading: 'ãŠãŠãã„' },
            { char: 'ç”·', reading: 'ãŠã¨ã“' }, { char: 'ç«¹', reading: 'ãŸã‘' },
            { char: 'ä¸­', reading: 'ãªã‹' }, { char: 'è™«', reading: 'ã‚€ã—' },
            { char: 'ç”º', reading: 'ã¾ã¡' }, { char: 'å¤©', reading: 'ã¦ã‚“' },
            { char: 'ç”°', reading: 'ãŸ' }, { char: 'åœŸ', reading: 'ã¤ã¡' },
            { char: 'äºŒ', reading: 'ã«' }, { char: 'æ—¥', reading: 'ã²' },
            { char: 'å…¥', reading: 'ã¯ã„ã‚‹' }, { char: 'å¹´', reading: 'ã¨ã—' },
            { char: 'ç™½', reading: 'ã—ã‚' }, { char: 'å…«', reading: 'ã¯ã¡' },
            { char: 'ç™¾', reading: 'ã²ã‚ƒã' }, { char: 'æ–‡', reading: 'ã¶ã‚“' },
            { char: 'æœ¨', reading: 'ã' }, { char: 'æœ¬', reading: 'ã»ã‚“' },
            { char: 'å', reading: 'ãª' }, { char: 'ç›®', reading: 'ã‚' },
            { char: 'ç«‹', reading: 'ãŸã¤' }, { char: 'åŠ›', reading: 'ã¡ã‹ã‚‰' },
            { char: 'æ—', reading: 'ã¯ã‚„ã—' }, { char: 'å…­', reading: 'ã‚ã' }
        ];

        let kanjiList = []; // ã‚·ãƒ£ãƒƒãƒ•ãƒ«å¾Œã®ãƒªã‚¹ãƒˆ
        let currentIndex = 0;
        let writer;

        // é…åˆ—ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã™ã‚‹é–¢æ•°
        function shuffle(array) {
            let newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        // åˆæœŸåŒ–å‡¦ç†
        function init() {
            kanjiList = shuffle(originalList);
            currentIndex = 0;
            loadChar();
        }

        function loadChar() {
            if (currentIndex >= kanjiList.length) {
                // å…¨å•çµ‚äº†æ™‚
                document.getElementById('status-msg').textContent = "ãœã‚“ã¶ãŠã‚ã‚Šã¾ã—ãŸï¼ã™ã”ã„ï¼";
                document.getElementById('character-target-div').innerHTML = "ğŸ’®";
                document.getElementById('character-target-div').style.fontSize = "150px";
                document.getElementById('character-target-div').style.display = "flex";
                document.getElementById('character-target-div').style.alignItems = "center";
                document.getElementById('character-target-div').style.justifyContent = "center";
                return;
            }

            const targetChar = kanjiList[currentIndex];
            
            // UIæ›´æ–°
            document.getElementById('reading-text').textContent = targetChar.reading;
            document.getElementById('progress-text').textContent = `${currentIndex + 1} / ${kanjiList.length} ã‚‚ã‚“ã‚`;
            document.getElementById('status-msg').textContent = "ãªãã£ã¦ã¿ã‚ˆã†ï¼";
            document.getElementById('status-msg').style.color = "#006064";

            // ä»¥å‰ã®æç”»ãŒã‚ã‚Œã°å‰Šé™¤
            document.getElementById('character-target-div').innerHTML = '';
            document.getElementById('character-target-div').style.display = "block"; // çµ‚äº†ç”»é¢ã‹ã‚‰ã®å¾©å¸°ç”¨

            // HanziWriterã®è¨­å®š
            writer = HanziWriter.create('character-target-div', targetChar.char, {
                width: 300,
                height: 300,
                padding: 10,
                showOutline: true, // ä¸‹çµµã‚’è¡¨ç¤º
                strokeAnimationSpeed: 1, 
                delayBetweenStrokes: 200, // ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯é–“ã®å¾…ã¡æ™‚é–“
                radicalColor: '#168F16',
                drawingWidth: 20, // ç·šã®å¤ªã•
                strokeColor: '#333', // ç·šã®è‰²
                highlightColor: '#FF7043', // ãƒ’ãƒ³ãƒˆã®è‰²
                outlineColor: '#DDD', // ä¸‹çµµã®è‰²
            });

            // ã‚¯ã‚¤ã‚ºãƒ¢ãƒ¼ãƒ‰ã‚’é–‹å§‹
            startQuiz();
        }

        function startQuiz() {
            writer.quiz({
                onMistake: function(strokeData) {
                    document.getElementById('status-msg').textContent = "ã¡ãŒã†ã‚ˆï¼ã‹ãã˜ã‚…ã‚“ ã¯ ã‚ã£ã¦ã‚‹ï¼Ÿ";
                    document.getElementById('status-msg').style.color = "#D32F2F";
                    
                    // é–“é•ãˆãŸã‚‰ãã®ç”»ã ã‘ãƒ’ãƒ³ãƒˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤º
                    writer.animateStroke(strokeData.strokeNum);
                },
                onCorrectStroke: function(strokeData) {
                    document.getElementById('status-msg').textContent = "ã„ã„æ„Ÿã˜ï¼";
                    document.getElementById('status-msg').style.color = "#388E3C";
                },
                onComplete: function(summaryData) {
                    document.getElementById('status-msg').textContent = "ã§ããŸï¼ã›ã„ã‹ã„ï¼ğŸ‰";
                    document.getElementById('status-msg').style.color = "#007bff";
                    
                    // æ­£è§£ã—ãŸã‚‰è‡ªå‹•ã§å°‘ã—å¾…ã£ã¦ã‹ã‚‰æ¬¡ã¸è¡ŒããŸã„å ´åˆã¯ä»¥ä¸‹ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã‚’å¤–ã™
                    // setTimeout(nextChar, 1500); 
                }
            });
        }

        function resetWriter() {
            startQuiz();
        }

        function animateStroke() {
            writer.animateStroke(0); // æœ€åˆã®ç”»ã‹ã‚‰ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        }

        function nextChar() {
            currentIndex++;
            loadChar();
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«é–‹å§‹
        window.onload = init;

    </script>
</body>
</html>
